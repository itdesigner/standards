<!DOCTYPE html>
<html>
    <head>
        <title>Engineering Standards : AWS Lambda</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Engineering Standards</a></span>
                            </li>
                                                    <li>
                                <span><a href="33470365.html">Engineering Standards &amp; Best Practices</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tooling-and-Frameworks_131104841.html">Tooling and Frameworks</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Engineering Standards : AWS Lambda
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Jerry Shaughnessy</span>, last modified on Oct 29, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p style="text-align: left;">Lambda's are a way to build and run applications in the cloud, one that lets you take advantage of your existing programming skills and your knowledge of<span> </span><a style="" title="" href="https://aws.amazon.com/" class="external-link" rel="nofollow">AWS</a>. With<span> </span><span title="">Lambda</span>, you simply create a Lambda function, give it permission to access specific AWS resources, and then connect the function to your AWS resources. Lambda will automatically run code in response to modifications to objects uploaded to<span> </span><a style="" title="" href="https://aws.amazon.com/s3/" class="external-link" rel="nofollow">Amazon Simple Storage Service (S3)</a><span> </span>buckets, messages arriving in<span> </span><a style="" title="" href="https://aws.amazon.com/kinesis/" class="external-link" rel="nofollow">Amazon Kinesis</a><span> </span>streams, or table updates in<span> </span><a style="" title="" href="https://aws.amazon.com/dynamodb/" class="external-link" rel="nofollow">Amazon DynamoDB</a>.</p><p style="text-align: left;"><span title="">Lambda</span><span> </span>is a zero-administration compute platform. You don’t have to configure, launch, or monitor EC2 instances. You don’t have to install any operating systems or language environments. You don’t need to think about scale or fault tolerance and you don’t need to request or reserve capacity. A freshly created function is ready and able to handle tens of thousands of requests per hour with absolutely no incremental effort on your part, and on a very cost-effective basis.</p><p style="text-align: left;">Let’s dig in! We’ll take a more in-depth look at<span> </span><span title="">Lambda</span>, sneak a peek at the programming model and runtime environment, and then walk through a programming example. As you read through this post, keep in mind that we have plenty of items on the<span> </span><span title="">Lambda </span>roadmap and that what I am able to share today is just the first step on what we expect to be an enduring and feature-filled journey.</p><h2 style="text-align: left;" id="AWSLambda-LambdaConcepts">Lambda Concepts</h2><p style="text-align: left;">The most important<span> </span><span title="">Lambda</span><span> </span>concept is the Lambda function, or function for short. You write your functions in<span> </span><a style="" href="http://nodejs.org/" class="external-link" rel="nofollow">Node.js</a><span> </span>(an event-driven, server side implementation of<span> </span><a style="" href="http://en.wikipedia.org/wiki/JavaScript" class="external-link" rel="nofollow">JavaScript</a>).</p><p style="text-align: left;">You upload your code and then specify context information to<span> </span><a style="" title="" href="https://aws.amazon.com/lambda/" class="external-link" rel="nofollow">AWS Lambda</a><span> </span>to create a function. The context information specifies the execution environment (language, memory requirements, a timeout period, and IAM role) and also points to the function you’d like to invoke within your code. The code and the metadata are durably stored in AWS and can later be referred to by name or by<span> </span><a style="" href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html" class="external-link" rel="nofollow">ARN</a><span> </span>(Amazon Resource Name). You an also include any necessary third-party libraries in the upload (which takes the form of a single ZIP file per function).</p><p style="text-align: left;">After uploading, you associate your function with specific AWS resources (a particular S3 bucket, DynamoDB table, or Kinesis stream).<span> </span><span title="">Lambda</span><span> </span>will then arrange to route events (generally signifying that the resource has changed) to your function.</p><p style="text-align: left;">When a resource changes,<span> </span><span title="">Lambda</span><span> </span>will execute any functions that are associated with it. It will launch and manage compute resources as needed in order to keep up with incoming requests. You don’t need to worry about this;<span> </span><span title="">Lambda</span><span> </span>will manage the resources for you and will shut them down if they are no longer needed.</p><p style="text-align: left;"><span title="">Lambda</span><span> </span>is accessible from the<span> </span><a style="" title="" href="https://console.aws.amazon.com/" class="external-link" rel="nofollow">AWS Management Console</a>, the<span> </span><a style="" title="" href="https://aws.amazon.com/tools/" class="external-link" rel="nofollow">AWS SDKs</a><span> </span>and the<span> </span><a style="" title="" href="https://aws.amazon.com/cli/" class="external-link" rel="nofollow">AWS Command Line Interface (CLI)</a>. The Lambda APIs are fully documented and can be used to connect existing code editors and other development tools to<span> </span><span title="">Lambda</span>.</p><h2 style="text-align: left;" id="AWSLambda-LambdaProgrammingModel">Lambda Programming Model</h2><p style="text-align: left;">Functions are activated after the associated resource has been changed. Execution starts at the designated Node.js function and proceeds from there. The function has access (via a parameter supplied along with the POST) to a<span> </span><a style="" href="http://www.json.org/" class="external-link" rel="nofollow">JSON</a><span> </span>data structure. This structure contains detailed information about the change (or other event) that caused the function to be activated.</p><p style="text-align: left;"><span title="">Lambda</span><span> </span>will activate additional copies of function as needed in order to keep pace with changes. The functions cannot store durable state on the compute instance and should use<span> </span><a style="" title="" href="https://aws.amazon.com/s3/" class="external-link" rel="nofollow">S3</a><span> </span>or<span> </span><a style="" title="" href="https://aws.amazon.com/dynamodb/" class="external-link" rel="nofollow">DynamoDB</a><span> </span>instead.</p><p style="text-align: left;">Your code can make use of just about any functionality that is intrinsic to Node.js and to the underlying Linux environment. It can also use the<span> </span><a style="" title="" href="https://aws.amazon.com/sdk-for-node-js/" class="external-link" rel="nofollow">AWS SDK for JavaScript in Node.js</a><span> </span>to make calls to other AWS services.</p><h2 style="text-align: left;" id="AWSLambda-LambdaRuntimeEnvironment">Lambda Runtime Environment</h2><p style="text-align: left;">The context information that you supply for each function specifies a maximum execution time for the function. This is typically set fairly low (you can do a lot of work in a couple of seconds) but can be set to up 60 seconds as your needs dictate.</p><p style="text-align: left;"><span title="">Lambda</span><span> </span>uses multiple IAM roles to manage access to your functions and your AWS resources. The<span> </span><strong>invocation role</strong><span> </span>gives<span> </span><span title="">Lambda</span>permission to run a particular function. The<span> </span><strong>execution role</strong><span> </span>gives a function permission to access specific AWS resources. You can use distinct roles for each function in order to implement a fine-grained set of permissions.</p><p style="text-align: left;"><span title="">Lambda</span><span> </span>monitors the execution of each function and stores request count, latency, availability, and error rate metrics in<span> </span><a style="" title="" href="https://aws.amazon.com/cloudwatch/" class="external-link" rel="nofollow">Amazon CloudWatch</a>. The metrics are retained for 30 days and can be viewed in the Console.</p><p style="text-align: left;">Here are a few things to keep in mind when as you start to think about how you will put<span> </span><span title="">Lambda</span><span> </span>to use:</p><ul style="text-align: left;"><li>The context information for a function specifies the amount of memory needed to run it. You can set this to any desired value between 128 MB and 1 GB. The memory setting also determines the amount of CPU power, network bandwidth, and I/O bandwidth that are made available to the function.</li><li>Each invocation of a function can make use of up to 256 processes or threads. It can consume up to 512 MB of local storage and up to 1,024 file descriptors.</li><li><span title="">Lambda</span><span> </span>imposes a set of administrative limits on each AWS account. For now, you can have up to 1000 invocation requests underway simultaneously.</li></ul><h2 id="AWSLambda-Lambda&#39;sinAction">Lambda's in Action</h2><p style="text-align: left;">Let’s step through the process of creating a simple function using the<span> </span><span title="">AWS Management Console</span>. As I mentioned earlier, you can also do this from the<span> </span><a style="" title="" href="https://aws.amazon.com/tools/" class="external-link" rel="nofollow">SDKs</a><span> </span>and the<span> </span><a style="" title="" href="https://aws.amazon.com/cli/" class="external-link" rel="nofollow">CLI</a>. The console displays all of my functions:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_cons_cloud_func_list_3.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_cons_cloud_func_list_3.png"></span></div><p style="text-align: left;">I simply click on<span> </span><strong>Create Function</strong><span> </span>to get started. Then I fill in all of the details:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_new_cloud_func_5.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_new_cloud_func_5.png"></span></div><p style="text-align: left;">I name and describe my function:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_name_func_1.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_name_func_1.png"></span></div><p style="text-align: left;">Then I enter the code or upload a ZIP file. The console also offers a choice of sample code snippets to help me to get started:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_enter_code_1.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_enter_code_1.png"></span></div><p style="text-align: left;">Now I tell<span> </span><span title="">Lambda</span><span> </span>which function to run and which IAM role to use when the code runs:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_code_handler_func_4.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_code_handler_func_4.png"></span></div><p style="text-align: left;">I can also fine-tune the memory requirements and set a limit on execution time:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_code_advanced_2.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_code_advanced_2.png"></span></div><p style="text-align: left;">After I create my function, I can iteratively edit and test it from within the Console. As you can see, the pane on the left shows a sample of the JSON data that will be passed to my function:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_code_edit_test_1.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_code_edit_test_1.png"></span></div><p style="text-align: left;">When the function is working as expected, I can attach it to an event source such as Amazon S3 event notification. I will to provide an<span> </span><strong>invocation role</strong><span> </span>in order to give S3 the permission that it needs to have in order to invoke the function:</p><p style="text-align: left;"><br/></p><div style="text-align: center;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://media.amazonwebservices.com/blog/2014/l_setup_s3_pub_2.png" data-image-src="https://media.amazonwebservices.com/blog/2014/l_setup_s3_pub_2.png"></span></div><p style="text-align: left;"><span title="">Lambda</span><span> </span>collects a set of metrics for each of my functions and sends them to<span> </span><a style="" title="" href="https://aws.amazon.com/cloudwatch/" class="external-link" rel="nofollow">Amazon CloudWatch</a>. I can view the metrics from the Console:</p><h2 id="AWSLambda-AdditionalReading:">Additional Reading:</h2><ul><li><iframe class="youtube-player" type="text/html" style="width: 400px; height: 300px"
	src="//www.youtube.com/embed/eOBq__h4OJ4?wmode=opaque" frameborder="0">
</iframe>
    
</li><li><a href="http://www.allthingsdistributed.com/2016/06/aws-lambda-serverless-reference-architectures.html" class="external-link" rel="nofollow">Serverless Architectures with Lambda's</a></li></ul>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Oct 29, 2017 01:41</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
